<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Sample Sites</title>
    <!-- TODO loading both jquery and minified version.. -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

    <!-- Custom styles for this template -->
    <link rel="stylesheet" href="/../css/bundle.min.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
                <a class="navbar-brand" href="/static/html/index.html">Sample websites</a>
            </div>
            <div id="navbar" class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="#">Home</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </div>
            <!--/.nav-collapse -->
        </div>
    </nav>

    <div class="container">

        <!--  <div class="starter-template"> -->


        <h1>Pomodoros</h1>

        <div class="pomodoro">
            <div class="timer first-timer">
              Work
            </div>
            <div class="timer second-timer">
              Notes
            </div>
            <div class="timer break-timer">
              Break
            </div>
        </div>

        <div class="dropdown">
            <button class="btn btn-default dropdown-toggle" type="button" id="work-dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    How long to work for?
    <span class="caret"></span>
  </button>
            <ul class="dropdown-menu" id="work-list">
                <li value="5">5 minutes</li>
                <li value="10">10 minutes</li>
                <li value="15">15 minutes</li>
                <li value="20">20 minutes</li>
                <li value="25">25 minutes</li>
                <li value="30">30 minutes</li>
                <li value="35">35 minutes</li>
            </ul>
        </div>
        <div class="dropdown">
            <button class="btn btn-default dropdown-toggle" type="button" id="notes-dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
How long to take notes?
<span class="caret"></span>
</button>
            <ul class="dropdown-menu" id="notes-list">
                <li value="1">1 minute</li>
                <li value="2">2 minutes</li>
                <li value="3">3 minutes</li>
                <li value="4">4 minutes</li>
                <li value="5">5 minutes</li>
                <li value="6">6 minutes</li>
                <li value="7">7 minutes</li>
                <li value="8">8 minutes</li>
                <li value="9">9 minutes</li>
                <li value="10">10 minutes</li>
            </ul>
        </div>

        <div class="dropdown">
            <button class="btn btn-default dropdown-toggle" type="button" id="break-dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
How long a break?
<span class="caret"></span>
</button>
            <ul class="dropdown-menu" id="break-list">
              <li value="1">1 minute</li>
              <li value="2">2 minutes</li>
              <li value="3">3 minutes</li>
              <li value="4">4 minutes</li>
              <li value="5">5 minutes</li>
              <li value="6">6 minutes</li>
              <li value="7">7 minutes</li>
              <li value="8">8 minutes</li>
              <li value="9">9 minutes</li>
              <li value="10">10 minutes</li>
            </ul>
        </div>
    </div>
    <div class="btn-group" role="group">
      <button type="button" class="btn btn-default ready" id="start-button">Start</button>
      <button type="button" class="btn btn-default" disabled id="pause-button">Pause</button>
      <button type="button" class="btn btn-default" disabled id="resume-button">Resume</button>
    </div><!-- /.btn-group -->


    <div class="work-display">

    </div><!-- /.work-display -->

    <div class="notes-display">

    </div><!-- /.notes-display -->

    <div class="break-display">

    </div><!-- /.break-display -->

    <footer class="footer">
        <div class="container">
            <p class="text-muted">
                This app uses the <a href="http://freesound.org"> Freesound </a> file <a href='http://freesound.org/people/kwahmah_02/sounds/250629/'>Alarm1.mp3</a> by <a href='http://freesound.org/people/kwahmah_02'>kwahmah_02</a>, licensed under
                <a href='http://creativecommons.org/licenses/by/3.0/'>CC-BY 3.0</a>
            </p>
        </div>
    </footer>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <!-- <script src="../scripts/timer.js" type="text/javascript"></script>
     <script src="../scripts/pomodoro.js"></script> -->
    <script type="text/javascript" src="../js/bundle.min.js">

    </script>
    <script type="text/javascript">
      var minutesToMillis = 1000;  // TODO it's set at 1000 for debugging, but should
      // be 60000.
      function updateWork(remainingTime) {
        $(".work-display").text(remainingTime);
      }
      function updateNotes(remainingTime) {
        $(".notes-display").text(remainingTime);
      }
      function updateBreak(remainingTime) {
        $(".break-display").text(remainingTime);
      }

      function disable(elem) {
        elem.removeClass('ready').prop("disabled", true);
      }

      function enable(elem) {
        elem.addClass('ready').prop("disabled", false);
      }

      function toggle(elem) {
        elem.toggleClass('ready').prop("disabled", (i, val) => {return !val});
      }

      $("#start-button").click(function () {
        pomodoroOne.startWorking();
        enable($("#pause-button"));
        disable($("#resume-button"));
      })

      $("#pause-button").click(function () {
        pomodoroOne.pause();
        toggle($(this));
        enable($("#resume-button"));
      })

      $("#resume-button").click(function () {
        pomodoroOne.resume();
        toggle($(this));
        enable($("#pause-button"));
      })

      var pomodoroOne = createPomodoro();

       $('#work-list > li').click(function () {
          pomodoroOne.setTime($(this).val() * minutesToMillis, 0);
        });

        $('#notes-list > li').click(function () {
          pomodoroOne.setTime($(this).val() * minutesToMillis, 1);
        });

        $('#break-list > li').click(function () {
          pomodoroOne.setTime($(this).val() * minutesToMillis, 2);
        });

        function createPomodoro() {
            var pomodoroDOM = $(".pomodoro");
            var first = 20 * minutesToMillis  // = Number(timings.find("input.set-first").val());
            var second = 5 * minutesToMillis //Number(timings.find("input.set-second").val());
            var breakTime = 5 * minutesToMillis //Number(timings.find("input.set-break").val());
            var out = pomodoro.create(first, second, breakTime, pomodoroDOM);
            var workAudio = new Audio("../assets/audio/250629__kwahmah-02__alarm1.mp3");
            var notesAudio = new Audio("../assets/audio/250629__kwahmah-02__alarm1.mp3");
            var breakAudio = new Audio("../assets/audio/250629__kwahmah-02__alarm1.mp3");
            workAudio.volume = 0.05;
            notesAudio.volume = 0.05;
            breakAudio.volume = 0.05;
            out.setWorkTimer(updateWork, workAudio);
            out.setNotesTimer(updateNotes, notesAudio);
            out.setBreakTimer(updateBreak, breakAudio);
            return out;
        }
    </script>

    <!-- Latest compiled and minified JavaScript -->

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <!--  <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script> -->
</body>

</html>
